ДЗ №4 T1 Иннотех

---

Задание: Реализовать сервис авторизации

---

Реализовано:
  1. Полное соответствие ТЗ
  2. Валидация
  3. Глобальная обработка исключений
  4. Добавлено подтверждение аккаунта через SMTP

---

**Инструкция запуска**

1. Поднять БД
   
```
docker compose up -d
```

2. Добавить и подключить .env

3. Указать в .env:
    1. MAIL_USERNAME - Ваша почта gmail (должна быть включена двухфакторная авторизация)
    2. MAIL_PASSWORD - Пароль приложения (получить в google настройках)
    3. JWT_SECRET - Сгенерировать 256-битный секрет jwt - https://jwtsecrets.com

Если вы не хотите настраивать свою почту, напишите в телеграм @avcherepanov7, выдам почту и пароль приложения

---

**Инструкция для тестирования**

**Регистрация происходит в 3 этапа:**

localhost:8080/api/v1/register/

1. **POST** init (происходит занесение в базу с статусом is_confirmed=false, отправляется код на указанную в запросе почту)
2. **POST** confirm (происходит подтверждение аккаунта, и очистка кода из БД)
3. **POST** complete (происходит завершение регистрации, шифрование пароля, выдается стартовая роль GUEST, выдаются JWT + RefreshToken)

**Работа с состояниями сущности (Роль)**

localhost:8080/api/v1/admin/

**Работа с токеном:**

localhost:8080/api/v1/token/

***ATTENTION***
Токен должен передаваться в заголовке Authorization с значением Bearer (ваш токен)
  
1. **POST** refresh (происходит обновление AccessToken через RefreshToken)
2. **POST** revoke (происходит отзыв токена, работает как с Access, так и с RefreshToken)

**Тестирование функционала**

Для проверки функционала необходимо сначала зарегистрироваться и положить токен в заголовок Authorization: Bearer (ваш токен)

---

Swagger:

<img width="1116" height="799" alt="image" src="https://github.com/user-attachments/assets/177890e8-bebe-4d03-a9f2-260fff9af8b7" />


***ATTENTION***
Для того, чтобы увидеть отчет swagger необходимо в spring.profiles.active указать dev








